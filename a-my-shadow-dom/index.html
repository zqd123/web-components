<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        main {
            padding: 20px;
        }
        span{
            margin: 10px 0;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <main>
        <div style="white-space: pre-wrap;">
        è¯´æ˜ï¼š    
            1. å¤–éƒ¨æ ·å¼ä¸ä¼šå½±å“shadow DOMå†…éƒ¨æ ·å¼;
            2. shadow DOMå†…éƒ¨æ ·å¼ä¸ä¼šå½±å“å¤–éƒ¨æ ·å¼;
            3. å¤–éƒ¨æ— æ³•é€šè¿‡ä¸€èˆ¬æ–¹å¼è·å–shadow DOMä¸­å…ƒç´ ;
            4. å¯ä»¥é€šè¿‡shadowRootè·å–shadow DOMä¸­çš„å…ƒç´ (attachShadowä¸­çš„modeå¿…é¡»ä¸ºopenï¼Œå¦‚æœclosedæ¨¡å¼ï¼Œåˆ™æ— æ³•è·å–å…ƒç´ );
        </div>
        <div>ä¸‹é¢æ˜¯demoï¼š</div>
        <div>
            <span>è¿™æ˜¯ä¸€ä¸ªshadow DOMå¤–é¢çš„spanå…ƒç´ </span>
        </div>
        <div id="host"></div>
        <!-- æ“ä½œDOM -->
        <button id="upper" type="button">å°† span å…ƒç´ è½¬æ¢ä¸ºå¤§å†™</button>
        <button id="reload" type="button">é‡æ–°åŠ è½½</button>
    </main>
    <script>
        const host = document.getElementById('host');
        // åˆ›å»ºä¸€ä¸ªå½±å­æ ¹
        const shadowRoot = host.attachShadow({ mode: 'open' });
        const span = document.createElement('span');
        span.textContent = 'è¿™æ˜¯ä¸€ä¸ªshadow DOMä¸­çš„spanå…ƒç´ ';
        // å°†spanæ·»åŠ åˆ°å½±å­æ ¹ä¸­
        shadowRoot.appendChild(span);


        const t = document.querySelector('#upper');
        t.onclick = () => {
            const spans = document.querySelectorAll('span');
            console.log("ğŸš€ ~ spans:", spans)
            // å°†spanå…ƒç´ çš„æ–‡æœ¬è½¬æ¢ä¸ºå¤§å†™
            spans.forEach(s => {
                s.textContent = s.textContent.toUpperCase();
            });
            const shadowSpans = host.shadowRoot.querySelectorAll('span');
            shadowSpans.forEach(s => {
                s.textContent = s.textContent.toUpperCase();
            });
        };
        //é‡æ–°åŠ è½½é¡µé¢
        const reload = document.querySelector("#reload");
        reload.addEventListener("click", () => document.location.reload());


        // const style = document.createElement('style');
        // style.textContent = `
        //     span {
        //         color: red;
        //         font-weight: bold;
        //         font-size: 20px;
        //     }
        // `;
        // // å°†æ ·å¼æ·»åŠ åˆ°å½±å­æ ¹ä¸­
        // shadowRoot.appendChild(style);

        const styleSheet = new CSSStyleSheet();
        styleSheet.replaceSync(`
            span {
                color: blue;
                font-weight: bold;
                font-size: 20px;
            }
        `);

        shadowRoot.adoptedStyleSheets = [styleSheet];
    </script>
</body>
</html>